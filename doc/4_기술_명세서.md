# 기술 명세서 (Technical Specification)

## 1. 개발 환경
-   **OS**: Windows
-   **Node.js**: v14.0.0 이상
-   **Package Manager**: npm

## 2. 프론트엔드 기술 스택

### 2.1 Core Framework
-   **React**: v18.3.1
    -   Component-Based Architecture
    -   Hooks (useState, useEffect, useContext, useReducer, custom hooks)
    -   **Code Splitting**: `React.lazy` & `Suspense`를 활용한 라우트 기반 코드 분할
-   **Vite**: v7.2.4
    -   빠른 HMR(Hot Module Replacement) 및 빌드 성능 제공

### 2.2 Routing
-   **React Router DOM**: v7.9.6
    -   SPA(Single Page Application) 라우팅 구현
    -   `BrowserRouter`, `Routes`, `Route`, `Link` 컴포넌트 활용

### 2.3 Styling & UI
-   **Vanilla CSS**: 전역 스타일(`index.css`) 및 레이아웃 제어
    -   **Font Optimization**: `optimizeLegibility`, `font-smoothing` 적용으로 렌더링 최적화
    -   **Flexbox**: 버튼 그룹 정렬 및 `action-tools` 구성 (`margin-right: auto`를 활용한 그룹 분리)
    -   **Grid**: 컬러 피커 팔레트 구현 (`grid-template-columns`)
-   **React Icons**: v5.5.0 (Material Design 및 Feather 아이콘 사용)
-   **Custom Color Picker**: 외부 라이브러리(`react-color`) 의존성 없이 React `useState`와 CSS를 활용하여 Google Keep 스타일 팔레트 직접 구현
-   **SweetAlert2**: v11.26.3 (사용자 알림 및 모달 인터페이스)
-   **yet-another-react-lightbox**: 이미지 확대 보기 (Lightbox)
-   **Masonry Layout**: `column-width` 속성을 활용한 그리드 뷰 구현

### 2.4 Utils
-   **UUID**: v13.0.0 (고유 ID 생성)

### 2.5 Component Architecture & Refactoring
-   **Reusable Components**: 반복되는 UI 로직을 공통 컴포넌트로 분리
    -   `ChecklistInputItem`: 체크리스트 항목 입력/렌더링 로직 통합 (NoteForm, EditNoteModal 공통 사용)
    -   `ColorPicker`: 색상 선택 UI 및 `KEEP_COLORS` 상수 데이터 통합 관리 (src/constants/index.js)
-   **Directory Structure**:
    -   `src/constants`: 전역 상수 관리 (e.g., 색상 팔레트, 메뉴 아이템)

## 3. 백엔드 및 데이터베이스 (Serverless)

### 3.1 Platform
-   **Firebase**:
    -   **Authentication**: 사용자 인증 및 세션 관리
        -   이메일/비밀번호 인증
        -   Google OAuth 2.0 (소셜 로그인)
        -   세션 지속성 옵션: `browserLocalPersistence` (로그인 유지) / `browserSessionPersistence` (브라우저 종료 시 로그아웃)
    -   **Cloud Firestore**: NoSQL 데이터베이스 및 실시간 동기화 (`onSnapshot`)
    -   **Storage**: 이미지 파일 저장
    -   **Hosting**: 정적 웹 호스팅 (예정)

### 3.2 SDK
-   **firebase**: v10.x.x
-   **Window File System Access API**:
    -   `showSaveFilePicker`: 모던 브라우저에서 백업 파일 저장 시 '다른 이름으로 저장' 다이얼로그 및 취소 감지 지원.
    -   **Mobile Fallback (Data URI)**: 
        -   파일 시스템 API가 제한된 모바일 브라우저(Samsung Internet 등) 환경 지원.
        -   Blob URL의 Lifecycle 문제(0바이트 저장) 해결을 위해 `data:` URI 스킴을 사용하여 파일 내용을 직접 링크에 임베딩.
        -   `createWritable` 오류 감지 시 자동으로 이 방식으로 전환(Fallback).

### 3.3 Data Backup & Restore Logic
-   **Batch Chunking (청크 분할)**:
    -   Firestore `writeBatch`의 500개 작업 제한을 준수하기 위해 대량의 데이터 복구 시 450개 단위로 트랜잭션을 분할 처리.
    -   `backupService.js` 내 `processBatchChunks` 함수에서 구현.
-   **Security**:
    -   서버나 클라우드 스토리지(Google Drive 등)를 거치지 않고, 로컬 스토리지와 직접 통신하여 데이터 프라이버시 강화.
    -   백업 데이터는 순수 JSON 텍스트 포맷(`.json`)으로 사용자가 직접 관리 가능.

### 3.4 UX Improvement Logic
-   **Optimistic Updates (낙관적 업데이트)**:
    -   메모 수정, 상태 변경(고정/삭제 등) 시 서버 응답을 기다리지 않고 UI를 즉시 업데이트하여 반응성 향상.
    -   `EditNoteModal`: `await` 제거를 통해 저장 버튼 클릭 시 즉시 모달 닫힘 처리.
    -   에러 처리: 백그라운드 동기화 실패 시 전역 에러 핸들러(`Swal`)를 통해 사용자에게 알림 및 상태 롤백(필요시).
-   **SEO Configuration**:
    -   `robots.txt`: 크롤링 허용 규칙 정의.
    -   `index.html`: `meta` 태그 및 Open Graph 프로토콜 적용으로 소셜 미디어 공유 최적화.

## 4. 코드 품질 관리
-   **ESLint**: v9.39.1
    -   JavaScript 코드 스타일 및 문법 오류 검사
    -   React Hooks 규칙 준수 확인

## 5. 성능 최적화 (Performance Optimization)
-   **Code Splitting (코드 분할)**:
    -   `React.lazy`와 `Suspense`를 사용하여 페이지 단위로 JS 번들을 분할. 초기 로딩 시 필요한 리소스만 로드하여 TTI(Time To Interactive) 단축.
-   **Chunk Splitting (청크 분할)**:
    -   Vite 설정을 통해 `manualChunks` 적용. `vendor(React)`, `firebase`, `ui` 라이브러리를 별도 청크로 분리하여 캐싱 효율 증대.
-   **Image Lazy Loading (이미지 지연 로딩)**:
    -   `loading="lazy"` 속성을 사용하여 뷰포트 외의 이미지는 로딩을 지연시킴으로써 네트워크 대역폭 절약.
-   **Rendering Optimization (렌더링 최적화)**:
    -   `React.memo`: `NoteCard`, `Sidebar` 등 빈번하게 사용되거나 부모 리렌더링에 영향받는 컴포넌트 메모이제이션.
    -   `useMemo` / `useCallback`: 필터링 로직 및 이벤트 핸들러 메모이제이션으로 불필요한 연산 방지.
