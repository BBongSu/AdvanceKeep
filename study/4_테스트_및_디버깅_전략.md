# 4. 테스트, 디버깅 및 최적화 전략

개발만큼 중요한 것이 품질 보증(QA)입니다. AdvanceKeep에서 사용된 고급 테크닉들을 정리합니다.

## 1. 낙관적 업데이트 (Optimistic Updates)
사용자 경험(UX)을 극대화하기 위한 핵심 기술입니다. (예: `useNotes.js`)

1.  **사용자 액션**: 사용자가 '저장' 버튼을 누름.
2.  **즉시 반영**: 서버 응답을 **기다리지 않고**, 로컬 상태(`setNotes`)를 먼저 업데이트하여 화면에 바로 표시. (앱이 엄청 빠른 것처럼 보임)
3.  **백그라운드 동기화**: 뒤에서 조용히 서버(Firebase)에 요청을 보냄.
4.  **롤백(Rollback)**: 만약 서버 요청이 실패하면, 아까 반영했던 가짜 데이터를 취소하고 에러를 표시.

## 2. 보안 규칙 (Security Rules) 테스트
`firestore.rules`는 서버 없는(Serverless) 아키텍처에서 백엔드 로직 역할을 합니다.

*   **원칙**: "최소 권한의 원칙 (Principle of Least Privilege)"
*   **검증 로직**:
    *   `request.auth != null`: 로그인했는가?
    *   `resource.data.userId == request.auth.uid`: 내 소유의 데이터인가?
    *   `request.auth.uid in resource.data.sharedWith`: 나에게 공유된 데이터인가?
*   이 규칙이 뚫리면 해커가 DB를 통째로 읽어갈 수 있으므로 가장 중요한 보안 테스트 항목입니다.

## 3. 모바일 디버깅 (Mobile Debugging)
PC에서는 잘 되는데 폰에서만 안 될 때, 디버깅하는 방법입니다.

### 3.1 크롬 원격 디버깅
1.  폰을 USB로 PC에 연결하고 USB 디버깅 활성화.
2.  PC 크롬 주소창에 `chrome://inspect/#devices` 입력.
3.  내 폰의 WebView 항목에서 `Inspect` 클릭.
4.  **PC 모니터에서 폰 화면의 콘솔로그(console.log)와 엘리먼트를 실시간으로 확인 가능!** (가장 강력한 도구)

## 4. 성능 최적화 (Optimization)
*   **Dynamic Import (Code Splitting)**: React의 `lazy`, `Suspense`를 사용하여 사용자가 방문하지 않은 페이지의 코드는 처음에 다운로드하지 않도록 분리. (초기 로딩 속도 향상)
*   **이미지 최적화**: 사용자가 10MB짜리 사진을 올려도, 클라이언트 사이드에서 리사이징/압축 후 업로드하여 트래픽과 스토리지 비용 절감.

## 5. 학습 제언: 특급 개발자로 가기 위해
이 프로젝트를 통해 프론트엔드부터 모바일, 백엔드(Firebase) 개념을 모두 경험했습니다. 더 나아가기 위해선 다음 주제들을 공부해보세요.
*   **TypeScript**: 현재 프로젝트에도 일부 도입되었지만, 모든 코드를 TS로 작성하여 런타임 에러를 컴파일 타임에 잡기.
*   **테스트 자동화 (Jest / Cypress)**: 사람이 일일이 눌러보는 테스트 대신, 코드로 테스트 코드를 작성하여 자동 검증하기.
*   **CI/CD (지속적 통합/배포)**: Github에 코드를 올리면(Push), 자동으로 빌드하고 테스트해서 앱 스토어에 배포까지 되도록 자동화 구축.
